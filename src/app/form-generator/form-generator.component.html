<div class="row" cdkDropListGroup>
	<div class=" col-3">
		<h5>Controls</h5>
		<div
			cdkDropList
			[cdkDropListData]="copyControlList"
			class="control-list"
			(cdkDropListDropped)="drop($event)"
		>
			<div class="example-box" *ngFor="let item of copyControlList" cdkDrag>
				{{item.controlName}}
			</div>
		</div>
	</div>
  
	<div class=" col-9 ">
		<h5>Form</h5> 
		<div class="mb-3" *ngFor = "let tab of formJson; let i = index">
			<div class="card">
				<div class="card-header mb-3">				
					<mat-expansion-panel>
							<mat-expansion-panel-header  [collapsedHeight]="'30px'" >      
								<mat-panel-title> 
									<div>
										<b>	{{tab.tabName}} </b> 
										<small class="hints"  *ngIf = 'tab.tabName == "" '>
											<strong>Enter Tab Details </strong>
										</small>
									</div>
								</mat-panel-title>  								
								<div class="mr-5 ripple" (click) = "deleteTab(i)" >		
									<small> <strong><i class="fa fa-trash"></i> Delete Tab</strong></small>
								</div>
							</mat-expansion-panel-header> 
							<div class="row">
								<div class="col-12 col-md-6">										
									<mat-form-field class="full-width">
										<input matInput placeholder="Tab ID"  [(ngModel)]= tab.tabID>
									</mat-form-field >   

									<mat-form-field class="full-width">
										<input matInput placeholder="Tab Order" [(ngModel)]= tab.tabOrder>
									</mat-form-field> 
								</div> 
								
								<div class="col-12 col-md-6">
									<mat-form-field class="full-width">
										<input matInput placeholder="Tab Name" [(ngModel)]= tab.tabName>
									</mat-form-field>
								</div>

							</div>
					</mat-expansion-panel>
				</div>
				<div
					cdkDropList
					[cdkDropListData]= tab.controls
					class="drop-list"
					(cdkDropListDropped)="drop($event)"
				>

					<div class="example-box" *ngFor="let item of tab.controls" cdkDrag>
						
						<mat-expansion-panel>
							<mat-expansion-panel-header  [collapsedHeight]="'30px'">  
								<mat-panel-title> 
									<div>
										<b>	{{item.label}} </b> 
										<small class="hints"  *ngIf = 'item.label == "" '>
											<strong>Enter {{item.controlName}} Details </strong>
										</small>
									</div>
								</mat-panel-title>  								
							</mat-expansion-panel-header> 

							<div class="row">
								<div class="col-12 col-md-6">
										
									<mat-form-field class="full-width">
										<input matInput placeholder="Control ID"  [(ngModel)]= item.controlID>
									</mat-form-field >   

									<mat-form-field class="full-width" *ngIf="item.controlType !== 'label'">
										<input matInput placeholder="Selected Value" [(ngModel)]= item.selectedValue>
									</mat-form-field> 
								</div> 
								
								<div class="col-12 col-md-6">

									<mat-form-field class="full-width">
										<input matInput placeholder="Label" [(ngModel)]= item.label>
									</mat-form-field>

									<mat-form-field class="full-width" *ngIf="item.controlType !== 'label'">
										<input matInput placeholder="Tooltip Text" [(ngModel)]= item.toolTipText>
									</mat-form-field> 

								</div>

								<div class="col-12 col-md-6">
									<span class="row" *ngIf="item.controlType !== 'label'" >
										<span class="col-12 col-md-4 hints">
											Is Required?
										</span>
										<span class="col-12 col-md-8">
											<span class="mr-5">
												<div class="form-check form-check-inline">
													<input type="radio" name="isRequired" [(ngModel)]= item.isRequired value="true" >
													<label class="form-check-label">
														True
													</label>
												</div>
											</span>
											
											<span class="">
												<div class="form-check form-check-inline">
													<input type="radio" name="isRequired" [(ngModel)]= item.isRequired value="false">
													<label class="form-check-label">
														False
													</label>
												</div>
											</span>
											</span>
										</span>
									
										<mat-form-field class="full-width" *ngIf="item.controlType !== 'label' && item.controlType !== 'checkbox'">
										<input matInput placeholder="Error Text" [(ngModel)]= item.errorText>
										</mat-form-field>

								</div>

								<div class="col-12 col-md-6"> 
									<span class="row" *ngIf="item.controlType !== 'label' && item.controlType !== 'checkbox'">
									<span class="col-12 col-md-4 hints">
										Has Error
									</span>
									<span class="col-12 col-md-8">
										<span class="mr-5">
											<div class="form-check form-check-inline">
												<input type="radio" name="hasError" [(ngModel)]= item.hasError value="true" >
												<label class="form-check-label">
													True
												</label>
											</div>
										</span>
										
										<span class="mr-5">
											<div class="form-check form-check-inline">
												<input type="radio" name="hasError" [(ngModel)]= item.hasError value="false">
												<label class="form-check-label">
													False
												</label>
											</div>
										</span>
										</span>
									</span>
								</div> 

								<div class="col-12 col-md-12"> 
									<span class="" *ngIf="item.controlType !== 'label' && item.controlType !== 'checkbox'">
										<span class="hints mr-5" >
											Option 
										</span>
										<span (click) = addOption(item.options)>
											<i class="fa fa-plus"></i>
										</span>
										<div *ngFor = "let opt of item.options, let i = index">
											<div class="row">
												<div class="col-12 col-md-6">
													<mat-form-field class="full-width">
														<input matInput placeholder="Option Label"  [(ngModel)]= opt.text>
													</mat-form-field > 
												</div>
												<div class="col-12 col-md-5">
													<mat-form-field class="full-width">
														<input matInput placeholder="Option Value"  [(ngModel)]= opt.value>
													</mat-form-field >								
												</div>
												<div class="col-12 col-md-1">
													<span (click)= 'deleteOption( item.options, i)'>
														<i class="fas fa-trash mt-25"></i>
													</span> 
												</div>

											</div>
										</div>
									</span>
								</div> 
							</div>
						</mat-expansion-panel>
					</div>
				</div>	
			</div>	
			<div class="mt-1">
				<div class="button-panel">
					<div class="row">
						<div class="col-6">
							<input type="text" [(ngModel)] = 'tab.previousbuttonlabel' class="col-6 float-left btn btn-primary btn-sm" placeholder="Enter Previous Button Label">
						</div>							
						<div class="col-6 ">
							<input type="text" [(ngModel)] = 'tab.nextbuttonlabel' class="col-6 float-right btn btn-primary btn-sm" placeholder="Enter Next Button Label">
						</div>
					</div>					
				</div>
			</div>	
		</div>
		
		<div>
			<button type="button" class="btn btn-primary full-width" (click)="addTab()">
				<b> <i class="fas fa-plus mr-2"></i> </b> Add New Tab
			</button>
		</div>
	</div>
</div>

